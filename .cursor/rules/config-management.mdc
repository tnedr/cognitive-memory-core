# Configuration Management Rules

## üéØ Configuration System Overview

The cursor agent management system uses a **simple, single-file configuration approach** with environment variable override support.

## üìÅ Configuration File

**Location**: `python-packages/cursor_agent_management/src/cursor_agent_management/config.py`

**Purpose**: Manages where JSON files (tasks.json, workers.json, etc.) are stored.

## üîß Configuration Methods

### **1. Default Configuration (Automatic)**
```python
# Uses _AGENT_WORKSPACE directory by default
# No configuration needed - works out of the box
```

### **2. Environment Variable Override**
```bash
# Windows
set CURSOR_AGENT_WORKING_DIR=E:\MyProject\agent_data

# Linux/Mac
export CURSOR_AGENT_WORKING_DIR=/path/to/agent/data
```

## üìä Configuration Priority

1. **Environment Variable** `CURSOR_AGENT_WORKING_DIR` (highest priority)
2. **Default Path** `_AGENT_WORKSPACE` (lowest priority)

## üöÄ Usage Examples

### **Default Usage (No Configuration)**
```python
from cursor_agent_management.config import config

# Automatically uses _AGENT_WORKSPACE directory
print(f"Working directory: {config.working_dir}")
print(f"Tasks file: {config.tasks_path}")
```

### **Environment Variable Override**
```bash
# Set environment variable
export CURSOR_AGENT_WORKING_DIR=/custom/path/to/agent/data

# Run task management
python src/cursor_agent_management/task_management.py list
```

### **Programmatic Configuration Check**
```python
from cursor_agent_management.config import config

# Check current configuration
print(f"Working directory: {config.working_dir}")
print(f"Tasks file: {config.tasks_path}")
print(f"Workers file: {config.workers_path}")
print(f"Activity log: {config.activity_log_path}")
```

## üìÇ File Structure

The system creates these files in the configured directory:

```
_AGENT_WORKSPACE/  (or your configured directory)
‚îú‚îÄ‚îÄ tasks.json           # Task states and data
‚îú‚îÄ‚îÄ workers.json         # Agent tracking and status
‚îú‚îÄ‚îÄ activity_log.csv     # Complete activity audit trail
‚îî‚îÄ‚îÄ task_management.lock # File locking for concurrency
```

## üéØ Best Practices

### **DO:**
- Use environment variables for different environments (dev, staging, prod)
- Keep configuration simple - avoid complex YAML files
- Use absolute paths for clarity
- Test configuration in different environments

### **DON'T:**
- Don't hardcode paths in code
- Don't create multiple configuration files
- Don't use complex configuration formats (YAML, JSON) for simple settings
- Don't modify config.py directly - use environment variables

## üîç Troubleshooting

### **Configuration Not Working**
```bash
# Check if environment variable is set
echo $CURSOR_AGENT_WORKING_DIR

# Check if directory exists and is writable
ls -la $CURSOR_AGENT_WORKING_DIR
```

### **Path Issues**
```python
# Check configuration programmatically
from cursor_agent_management.config import config
print(f"Working dir exists: {config.working_dir.exists()}")
print(f"Working dir writable: {config.working_dir.is_dir()}")
```

### **Default Configuration**
```python
# If environment variable is not set, uses default
from cursor_agent_management.config import config
print(f"Using default path: {config.working_dir}")
```

## üö® Important Notes

- **Single Source of Truth**: Only `config.py` manages configuration
- **Environment Variable Priority**: Always overrides default values
- **Automatic Directory Creation**: Working directory is created automatically
- **No External Dependencies**: No YAML, no complex parsing
- **Cross-Platform**: Works on Windows, Linux, and Mac

## üìù Development Guidelines

When working with the configuration system:

1. **Always use the config object** - don't hardcode paths
2. **Test with environment variables** - ensure override works
3. **Check directory permissions** - ensure writable access
4. **Use absolute paths** - avoid relative path confusion
5. **Document environment setup** - for team members

## üîÑ Migration Notes

If you need to change the working directory:

1. **Set environment variable**: `export CURSOR_AGENT_WORKING_DIR=/new/path`
2. **Move existing files**: Copy JSON files to new location
3. **Test configuration**: Verify all files are accessible
4. **Update documentation**: Inform team of new path

## üéâ Benefits

- **Simple**: One file, one way to configure
- **Flexible**: Environment variable override
- **Reliable**: No complex parsing or external dependencies
- **Maintainable**: Easy to understand and modify
- **Standard**: Follows industry best practices